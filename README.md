# lv_cxx_bindgen
A C++ binding generator for LVGL. Written in Rust (oh the irony)

> This is still work-in-progress, it doesn't even generate any sources for
> now, but it's in the works.

This generator uses tree-sitter to efficiently construct an AST of all the headers
in LVGL source code, that will later be analyzed, and used as a basis for all
autogenerated C++ code. Also, it supports different C++ target versions, like C++11,
C++17, C++20 etc.

## Process

In short, the whole process can be simplified to 3 main steps:

- Parsing
- Grouping
- Generation

The first step is responsible for getting the raw source code, parsing it into
an AST, and extracting all functions/constants/typedefs/etc into a list.

The second step then groups all items inside that list in, well, groups, for
example "this group of functions should result in a class", or "this group
of functions should result in a namespace" etc.

And the best for last, the third step consists of actually converting allat into
actual C++ code. That shit is done manually, for plain efficiency and also ease
of understanding what is actually going on. Also, an additional `clang-format`
run can be named a "three and a half" step, because it's part of codegen, but not
part of the actual generator.

So, a full process can be described like this:

- Extraction
    - Source AST parsing
    - Function list extraction
    - Function list simplification (removal of singular void args, etc)
- Grouping
    - In namespaces
    - In classes
    - Function arguments transformation for more idiomatic C++
- Generation
    - Conversion of groups into output AST
    - AST to source code generation
    - clang-format run over generated code
